<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>红包领取记录</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    <!-- JQuery -->
    <script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
    <!--<script src="../../assets/libs/bootstrap.min.js"></script>-->
    <!-- Private -->
    <link href="../general_file/general_css.css" rel="stylesheet" type="text/css">
    <link href="red_packet/red_packet.css" rel="stylesheet" type="text/css">
<style>
    body{
        background:#eee;
    }
    .dynamic{
        background:#fff;
    }
    .dynamic{
        display: -webkit-box; /*必须结合的属性 ，将对象作为弹性伸缩盒子模型显示 。*/
    /*-webkit-box-orient 必须结合的属性 ，设置或检索伸缩盒对象的子元素的排列方式 。*/
        text-overflow: ellipsis;/*，可以用来多行文本的情况下，用省略号“…”隐藏超出范围的文本 。*/
        overflow : hidden;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }

</style>
</head>
<body>
<div class="wrap">
<div class="dynamic">
    <span id="redTotal"></span>
    <i id="dynamic"></i>

</div>
</div>

<p class=" mgt15" id="redCount"></p>
<ul class="red_list_give">

    <!--<li>-->
            <!--<span>-->
                <!--<i>张仲景张仲景张仲景张仲景张仲景张仲景张仲景张仲景张仲景</i>-->
                <!--<em>0.01元</em>-->
            <!--</span>-->
        <!--<u>12-1 08:01</u>-->
    <!--</li>-->
</ul>
<div id="loading">
    <div class="gen-gray-back"></div>
    <div class="alert" style="padding:15px; width:170px; background-color:rgba(255,255,255,0.0);" id="suc_alert">

        <div class="cushion">
            <img src="../apply_doctor/images/Loading@3x@3x.png" id="change">
        </div>

    </div>
</div>
<script src="../general_file/general_js.js"></script>
<script src="../general_file/jquery.ellipsis.js"></script>
<!--<script src="../general_file/new_ellipsis.js"></script>-->
<script>

    var data = <%-data%>;

    console.log(data);
    $(function(){


//        $(document).ready(function(){
//            $("#dynamic").ellipsis({
//                row:2
//            });
//            /*$('.dynamic').ellipsis({
//                english: false,
//                lineNum: 2
//            });*/
//
//        })




        //基本信息=========================
        var usedValue=Math.ceil(data.hongbaoUsedValue*100);
        usedValue=usedValue/100;
        var hongbaoUsedValue=getMoney(usedValue);
        var totalValue=Math.ceil(data.hongbaoTotalValue*100);
        totalValue=totalValue/100;
        if(usedValue>totalValue){
            totalValue=usedValue
        }
        var hongbaoTotalValue=getMoney(totalValue);
        
        if(data.hongbaoStatus=="timeUp"){
            $("#redCount").text("已领取"+data.hongbaoUsedCount+"/"+data.hongbaoTotalCount+"个,共"+hongbaoUsedValue+"/"+hongbaoTotalValue+"元,该红包已过期");

        }else{
            $("#redCount").text("已领取"+data.hongbaoUsedCount+"/"+data.hongbaoTotalCount+"个,共"+hongbaoUsedValue+"/"+hongbaoTotalValue+"元");

        }
        $("#redTotal").text("#前"+data.hongbaoTotalCount+"名转发领红包#");
       // data.moment="拉伸的咖拉伸的咖拉伸的咖拉伸的咖拉伸的拉伸的咖拉伸的咖拉伸的咖拉伸的咖拉伸的";
        $("#dynamic").text(data.moment);
        var width=screen.width;

        //处理名字
        //width=width-104;
        //var wordsCount=parseInt(width/17);
        //alert(wordsCount);

        var redListContent="";
        for(var i=0; i<data.list.length;i++){
            var listTime=getTime(data.list[i].createdAt);
            //处理名字
            var name=data.list[i].name;
//            if(name.length>wordsCount){
//                name=name.slice(0,wordsCount-2)+"...";
//            }
            redListContent=redListContent+"<li><span><i>"+name+"</i><em>"+getMoney(data.list[i].cash)+"元</em></span> <u>"+listTime+"</u> </li>";
        }
        $(".red_list_give").append(redListContent);
       $("#loading").hide();

    })
</script>
</body>
</html>