<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>活动详情</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no" />
    <script src="https://cdn.bootcss.com/vue/2.5.13/vue.min.js" charset="utf-8"></script>
    <script src="https://cdn.bootcss.com/vue-resource/1.5.0/vue-resource.js"></script>
    <script src="https://unpkg.com/mint-ui/lib/index.js"></script>
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
    <link rel="stylesheet" href="beauty_contest.css" />
</head>
<body>
<div class="all" id="app">
    <div class="msg_top">
        <img src="https://cdn.juliye.net/beauty_top.png"/>
    </div>
    <div class="msg_center">
        <div class="mag_item">
            <div class="item_title">*高校-院系-年级</div>
            <div class="item_bg">
                <input class="input_dt" type="text" v-model='postData.school_info' placeholder="请输入文字内容"/>
            </div>
        </div>

        <div class="mag_item">
            <div class="item_title">*真实姓名</div>
            <div class="item_bg">
                <input class="input_dt" type="text" v-model='postData.student_name' placeholder="请输入文字内容"/>
            </div>
        </div>

        <div class="mag_item">
            <div class="item_title">*写下一段霸气的拉票宣言</div>
            <div class="item_bg2">
                <textarea class="input_dt2" type="text" v-model='postData.declaration' placeholder="请输入8-20个字符内容"></textarea>
            </div>
        </div>

        <div class="mag_item">
            <div class="item_title">推荐人</div>
            <div class="item_bg">
                <input class="input_dt" type="text" v-model='postData.build_leader' placeholder="请输入文字内容（如：楼长姓名）"/>
            </div>
        </div>
        <div class="mag_item">
            <div class="item_title">*请上传本人照片</div>
            <div class="item_sp">
                <div class="item_imgbg" v-for="item in postData.imgs" >
                    <img class='img_show' v-bind:src="'https://cdn.juliye.net/' + item">
                </div>
            </div>
        </div>
    </div>

    <div class="msg_bottom">
        <div class="msg">PS：带有*号内容必须填写</div>
        <div class="msg">活动最终解释权归满天星辉联盟所有</div>
    </div>

    <div class="cover" v-if='isCover' v-on:click="closeCover">
        <div class="msg_card">{{msg}}</div>
    </div>
</div>
</body>
<script>
    new Vue({
      el:'#app',
      data:{
          isCover:false,
          once: false,
          msg:'请填写完整信息！',
          postData:{
              activity_id:'',
              recommended_user_id :'',
              user_id :'',
              school_info:'',
              student_name:'',
              build_leader:'',
              declaration:'',
              imgs:[],
          },



      },
      methods: {
          getDetail(){
              let that = this;
              that.$http
                  .get('/mc_weapp/product/activity/2/get_info',{params:{
                          id: that.postData.activity_id,
                          user_id: that.postData.user_id}
                  })
                  .then(function (res) {
                      console.log(res);
                      that.postData= res.body.data;
                      that.data = that.data;

                  }, function (err) {
                      console.log(err);
                  });
          }
      },
      created(){
        let that = this;
        var route = window.location.href;

        var localarr = route.split('?')[1].split('&');
        var tempObj = {};
        for (var i = 0; i < localarr.length; i++) {
          tempObj[localarr[i].split('=')[0]] = localarr[i].split('=')[1];
        }
        that.postData.activity_id = tempObj.id;
        that.postData.recommended_user_id = tempObj.recommended_user_id;
        that.postData.user_id = tempObj.user_id;
        that.data = that.data;
        that.getDetail();
      },
    })
</script>
</html>