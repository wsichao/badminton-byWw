<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>支付成功</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimal-ui">
    <meta name="apple-mobile-web-app-status-bar-style" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link href="advCss.css" rel="stylesheet" type="text/css">
    <meta name="format-detection" content="telephone=no" />
    <script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
<style>
    .success{
        margin:5.5% auto 0 auto;
        width:75px;
    }
    .success p{
        margin:15px auto 0 auto;
        text-align: center;
        font-size: 19px;
        color: #33A5EE;
        letter-spacing: -0.46px;
    }
    .p1{

        width:89.1%;
         font-size: 15px;
        color: #000;
        letter-spacing: -0.37px;
        margin:12px auto 0 auto;
        text-align: center;
        padding-bottom:36px;
    }
    .wd{
        width:93.6%;
        margin:5.5% auto;
        display:block;
    }
    .money{
       /* display:block;*/
        text-align: center;
        font-size: 40px;
        padding-bottom:36px;
    }
</style>
</head>
<body>
    <div class="success">
        <img src="images/success@2x.png" height="75" width="75"/>
        <p>支付成功</p>
    </div>
    <p class="p1" id="cong">恭喜你，你已经成功出价，可以去看看你的排名啦!</p>
    <p class="p1" style="display: none" id="receive"><span id="name"></span>已收到您的款项</p>
    <p  class="money" style="display: none" id="money" ><!--<i style="font-family:'微软雅黑'">&yen;</i>--><span id="price" style="font-family:'微软雅黑'">5,000</span></p>
    <p id="goCheck" type="button"  class="ad_button wd"  style="margin:0 auto; text-align: center; line-height:44px">前去查看</p>
</body>
</html>
<script src="lib/connectWebViewJavascriptBridge.js"></script>
<script>
    function getUrlQueryObject(){
        var query = decodeURIComponent(window.location.search.substring(1));
        var urlArray = query.split('&'),queryObj = {};
        urlArray.forEach(function(item){
            var itemArray =  item.split('=');
            queryObj[itemArray[0]] = itemArray[1];
        })
        return queryObj;
    }
    function getUrlParam(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
        var r = window.location.search.substr(1).match(reg); //匹配目标参数
        if (r != null) return unescape(r[2]); return null; //返回参数值
    }
    var webBridge = webViewBridge();
    webBridge.bridgeInit(function (bridge) {
        bridge.registerHandler('complete', function(data,responseCallback){
            //window.location("succPayment.html?frompage=payment");
        });
        bridge.registerHandler('goBack', function(data,responseCallback){
            var backInfo ={};
            backInfo.isPaySuc = true;
            responseCallback(JSON.stringify(backInfo));
        })
        bridge.registerHandler('backButton', function(data,responseCallback){
            var result = {
                isClose : true
            }
            responseCallback(JSON.stringify(result));
        })

    });
    $("#goCheck").click(function(){
        webBridge.upload("backCheck");
    })
    $(function(){
        var frompage=getUrlQueryObject().from;
        var price  = getUrlQueryObject().price.toString().indexOf(".") == 0 ? "0"+getUrlQueryObject().price : getUrlQueryObject().price;
        var price = "¥"+price;
        var docName = getUrlQueryObject().docName;
        if(frompage=="payment"){
            $("#name").html(docName);
            $("#price").text(price);
            $("#cong").hide();
            $("#receive").show();
            $("#money").show();
            $("#goCheck").html("完成");
        }
    });

</script>


